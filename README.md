# some-scheme-compiler
Actually only targeting lambda calc at first, but yeah

# Compiling and running

Currently the only way to run code generated by the compiler is to paste it into
the following template:

The makefile is setup to compile the content of `src/core/test_build.c`.

``` c
#include "base.h"
#include "builtin.h"

/*
    Generated code pasted here
*/

int main() {
  struct env_elem base_env = {
    .base = object_base_new(OBJ_ENV),
    .ident_id = 0,
    .val = NULL,
    .nexts = vector_env_elem_nexts_new(0),
  };

  struct closure initial_closure = object_closure_one_new(0, main_lambda, &base_env);
  struct thunk initial_thunk = {
    .closr = &initial_closure,
    .one = {NULL},
  };

  struct thunk *thnk_heap = malloc(sizeof(struct thunk));
  memcpy(thnk_heap, &initial_thunk, sizeof(struct thunk));
  scheme_start(thnk_heap);
}

```
